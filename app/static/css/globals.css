  :root{
    --topbarH: 60px;
    --brand-accent:#00b8c9;
    --sidebarW:260px;
    --bg1:#f0f9ff;
  }
  *, *::before, *::after{
    scrollbar-width:none;
    -ms-overflow-style:none;
  }
  *::-webkit-scrollbar{display:none;}
  body{
    font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    background:var(--bg1);
    color:rgb(30 41 59);
  }
  .app-shell{overflow-x:hidden;}
  .app-shell .sidebar{
    position:fixed; top:0; left:0; height:100vh; width:var(--sidebarW);
    background:white; border-right:1px solid rgb(226 232 240);
    transition:transform .3s ease; z-index:40; overflow:auto;
    -ms-overflow-style:none; scrollbar-width:none;
  }
  .app-shell .sidebar::-webkit-scrollbar{display:none;}
  .app-shell .content{
    transition:margin-left .3s ease;
    min-height:100vh;
    background:#f8fafc;
  }
  .app-shell.sidebar-open .sidebar{transform:translateX(0);}
  .app-shell:not(.sidebar-open) .sidebar{transform:translateX(-100%);}
  .app-shell.sidebar-open .content{margin-left:var(--sidebarW);}
  .sticky-head thead th{
    position:sticky;
    top:0;
    z-index:5;
    background:rgb(241 245 249);
    backdrop-filter:blur(2px);
    box-shadow:inset 0 -1px 0 0 rgba(148,163,184,0.4);
  }
  .sidebar nav .nav-link{
    position:relative;
    display:flex;
    align-items:center;
    justify-content:flex-start;
    gap:.5rem;
    border-radius:0.75rem;
    padding-left:1.25rem;
    color:rgb(71 85 105);
    font-weight:500;
    background:none;
    border:none;
    width:100%;
    transition:background-color .2s,color .2s;
  }
  .sidebar nav .nav-link::before{
    content:"";
    position:absolute;
    left:8px;
    top:8px;
    bottom:8px;
    width:4px;
    border-radius:999px;
    background:transparent;
    transform:scaleY(0);
    transform-origin:center;
    transition:transform .2s ease,background-color .2s ease;
    pointer-events:none;
  }
  .sidebar nav .nav-link:hover{
    background:rgb(241 245 249);
    color:rgb(30 64 175);
  }
  .sidebar nav .nav-link.active{
    background:rgb(207 250 254);
    color:rgb(14 116 144);
    box-shadow:inset 0 0 0 1px rgba(8,145,178,0.15);
    font-weight:600;
  }
  .sidebar nav .nav-link.active:hover{
    color:rgb(14 116 144);
  }
  .sidebar nav .nav-link.active::before{
    background:var(--brand-accent);
    transform:scaleY(1);
  }
  .iconbtn{
    border:1px solid rgb(203 213 225); padding:.5rem 1rem; border-radius:.5rem;
    transition:background-color .2s,box-shadow .2s; color:rgb(51 65 85); font-weight:600;
    background:white; display:inline-flex; align-items:center; gap:.5rem;
  }
  .iconbtn:hover{background:rgb(248 250 252); box-shadow:0 1px 3px rgb(0 0 0/.05);}
  .pill{display:inline-flex; align-items:center; gap:.5rem; padding:.35rem .75rem;
    border:1px solid rgb(226 232 240); border-radius:9999px; background:white; box-shadow:0 1px 2px 0 rgb(0 0 0 / .05);}
  .dot{width:.5rem; height:.5rem; border-radius:9999px; background:#10b981; box-shadow:0 0 0 3px rgba(16,185,129,.2);}
  .fade{animation:fade .2s ease-out;}
  @keyframes fade{from{opacity:0; transform:translateY(-10px)} to{opacity:1; transform:translateY(0)}}
  .auto-grid{grid-template-columns:repeat(auto-fit,minmax(180px,1fr));}
  .no-scrollbar{scrollbar-width:none;-ms-overflow-style:none;}
  .no-scrollbar::-webkit-scrollbar{display:none;}
  .hidden{display:none !important;}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;}
  .date-range-wrapper{display:flex;align-items:center;min-width:220px;}
  .date-range-display{display:inline-flex;align-items:center;gap:.55rem;padding:.5rem .9rem;border:1px solid rgba(148,163,184,.4);border-radius:.85rem;background:rgba(255,255,255,.88);font-size:.7rem;font-weight:600;letter-spacing:.12em;color:#475569;text-transform:uppercase;cursor:pointer;transition:box-shadow .2s ease,transform .2s ease,border-color .2s ease;}
  .date-range-display:hover{box-shadow:0 10px 25px rgba(15,23,42,0.12);border-color:rgba(14,165,233,0.45);transform:translateY(-1px);}
  .date-range-display:focus-visible{outline:2px solid rgba(6,182,212,0.4);outline-offset:3px;}
  .date-range-display.has-value{background:rgba(236,254,255,.9);border-color:rgba(6,182,212,.55);color:#0e7490;}
  .date-range-display .label{font-size:.65rem;font-weight:700;letter-spacing:.18em;color:#94a3b8;}
  .date-range-display .value{font-size:.88rem;letter-spacing:0;color:#0f172a;font-weight:700;}
  .date-range-display.has-value .value{color:#0e7490;}
  .date-range-display .value::before{content:"[";margin-right:.2rem;color:#cbd5e1;font-weight:500;}
  .date-range-display .value::after{content:"]";margin-left:.2rem;color:#cbd5e1;font-weight:500;}
  .modal{position:fixed;inset:0;z-index:65;display:none;}
  .modal--confirm{z-index:70;}
  .modal--export{z-index:75;}
  .modal.show{display:block;}
  .modal .mask{position:absolute;inset:0;background:rgba(15,23,42,.45);backdrop-filter:blur(3px);}

  /* Modal Overlay (for prompt, confirm, copy dialogs) */
  .modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9999;display:none;background:rgba(15,23,42,.5);backdrop-filter:blur(3px);}
  .modal-overlay.show{display:flex;align-items:center;justify-content:center;}
  .modal-card{background:#fff;border-radius:1rem;box-shadow:0 25px 70px rgba(15,23,42,0.22);border:1px solid #e2e8f0;overflow:hidden;width:100%;margin:1rem;}

  .modal-dialog{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;border-radius:1rem;box-shadow:0 25px 70px rgba(15,23,42,0.18);border:1px solid #e2e8f0;overflow:hidden;display:flex;flex-direction:column;max-height:90vh;width:min(92vw,560px);}
  .modal-dialog--sm{width:min(92vw,420px);}
  .modal-dialog--md{width:min(92vw,560px);}
  .modal-dialog--lg{width:min(94vw,720px);}
  .modal-dialog--xl{width:min(96vw,1100px);}
  .modal-header{display:flex;align-items:flex-start;justify-content:space-between;padding:1.25rem 1.5rem;border-bottom:1px solid #e2e8f0;gap:1rem;background:linear-gradient(135deg,rgba(240,249,255,.95),#ffffff);}
  .modal-title{font-size:1.1rem;font-weight:700;color:#0f172a;}
  .modal-subtitle{font-size:.85rem;color:#64748b;margin-top:.35rem;}
  .modal-close{display:inline-flex;align-items:center;justify-content:center;padding:.45rem;border-radius:.75rem;color:#94a3b8;transition:color .2s ease,background-color .2s ease;}
  .modal-close:hover{color:#0f172a;background:#f1f5f9;}
  .modal-body{padding:1.4rem 1.5rem;overflow:auto;display:flex;flex-direction:column;gap:1rem;background:#fff;}
  .modal-body--grid{display:grid;gap:1rem;padding:1.4rem 1.5rem;}
  .modal-footer{display:flex;justify-content:flex-end;gap:.75rem;padding:1.1rem 1.5rem;border-top:1px solid #e2e8f0;background:#f8fafc;}
  .modal-btn{border-radius:.75rem;padding:.5rem 1.1rem;font-size:.85rem;font-weight:600;transition:background .2s ease,filter .2s ease,color .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.4rem;}
  .modal-btn:disabled{opacity:.55;cursor:not-allowed;}
  .modal-btn.secondary{border:1px solid #cbd5e1;background:#fff;color:#475569;}
  .modal-btn.secondary:hover{background:#f1f5f9;}
  .modal-btn.primary{border:1px solid transparent;background:#06b6d4;color:#fff;}
  .modal-btn.primary:hover{filter:brightness(.95);}
  .modal-btn.danger{border:1px solid transparent;background:#ef4444;color:#fff;}
  .modal-btn.danger:hover{filter:brightness(.95);}
  .modal-field{display:flex;flex-direction:column;gap:.35rem;}
  .modal-field label{font-size:.8rem;font-weight:600;color:#475569;text-transform:uppercase;letter-spacing:.08em;}
  .modal-field input[type="date"],
  .modal-field input[type="text"],
  .modal-field input[type="password"],
  .modal-field select{border:1px solid #cbd5e1;border-radius:.75rem;padding:.55rem .75rem;font-size:.9rem;font-weight:600;color:#0f172a;background:#fff;transition:border-color .2s ease,box-shadow .2s ease;}
  .modal-field input:focus,
  .modal-field select:focus{outline:none;border-color:#06b6d4;box-shadow:0 0 0 2px rgba(6,182,212,.25);}

  /* Users & Roles page */
  
  /* Users Page Container */
  .users-page-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 1.5rem;
  }
  .users-page-header {
    margin-bottom: 2rem;
  }
  .users-page-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: #0f172a;
    letter-spacing: -0.025em;
  }
  .users-page-subtitle {
    font-size: 0.95rem;
    color: #64748b;
    margin-top: 0.35rem;
  }
  .users-page-actions {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .users-page-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }
  .users-page-hint {
    font-size: 0.8rem;
    color: #94a3b8;
  }
  
  /* Users Table Card */
  .users-table-card {
    background: #fff;
    border: 1px solid #e2e8f0;
    border-radius: 1rem;
    box-shadow: 0 4px 16px rgba(15, 23, 42, 0.04);
    overflow: hidden;
  }
  .users-table-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid #e2e8f0;
    background: linear-gradient(135deg, rgba(248, 250, 252, 0.8), #fff);
  }
  .users-table-title {
    font-size: 1.1rem;
    font-weight: 700;
    color: #0f172a;
  }
  .users-table-count {
    font-size: 0.8rem;
    color: #64748b;
    background: #f1f5f9;
    padding: 0.35rem 0.75rem;
    border-radius: 2rem;
    font-weight: 500;
  }
  .users-table-wrapper {
    overflow-x: auto;
  }
  .users-table {
    width: 100%;
    min-width: 800px;
    border-collapse: collapse;
  }
  .users-table thead {
    background: #f8fafc;
  }
  .users-table th {
    text-align: left;
    font-size: 0.75rem;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #e2e8f0;
  }
  .users-table th:first-child {
    padding-left: 1.5rem;
  }
  .users-table th:last-child {
    padding-right: 1.5rem;
  }
  
  /* User Row */
  .user-row {
    border-bottom: 1px solid #f1f5f9;
    transition: background 0.15s ease;
  }
  .user-row:hover {
    background: rgba(248, 250, 252, 0.6);
  }
  .user-row:last-child {
    border-bottom: none;
  }
  .user-cell {
    padding: 1.25rem 1.5rem;
    vertical-align: middle;
  }
  .user-info-cell {
    min-width: 200px;
  }
  .user-name {
    font-size: 0.95rem;
    font-weight: 600;
    color: #0f172a;
    margin-bottom: 0.25rem;
  }
  .user-email {
    font-size: 0.85rem;
    color: #64748b;
  }
  .user-invite-link {
    font-size: 0.7rem;
    color: #94a3b8;
    margin-top: 0.5rem;
    word-break: break-all;
  }
  
  /* Status Pills */
  .status-pills {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  .status-pill {
    display: inline-flex;
    align-items: center;
    padding: 0.35rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 2rem;
  }
  .status-pill.success {
    background: #dcfce7;
    color: #166534;
  }
  .status-pill.pending {
    background: #fef3c7;
    color: #92400e;
  }
  .status-pill.info {
    background: #e0f2fe;
    color: #0369a1;
  }
  .status-pill.muted {
    background: #f1f5f9;
    color: #64748b;
  }
  
  /* User Actions */
  .user-actions-cell {
    white-space: nowrap;
  }
  .user-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  .user-actions .btn {
    padding: 0.45rem 0.85rem;
    font-size: 0.8rem;
  }
  
  /* Role Pill */
  .role-pill {
    display: inline-flex;
    align-items: center;
    padding: 0.4rem 0.85rem;
    font-size: 0.8rem;
    font-weight: 600;
    background: #f0f9ff;
    color: #0369a1;
    border-radius: 0.5rem;
    border: 1px solid #bae6fd;
  }

  .users-page .card,
  .users-modal .card{
    background:#fff;
    border:1px solid #e2e8f0;
    border-radius:1rem;
    box-shadow:0 1px 2px rgba(15,23,42,0.06);
  }
  .users-page .btn,
  .users-modal .btn{
    display:inline-flex;
    align-items:center;
    gap:.5rem;
    border:1px solid #cbd5e1;
    border-radius:.6rem;
    padding:.5rem .9rem;
    background:#fff;
    font-weight:600;
    color:#334155;
    transition:background-color .2s ease;
  }
  .users-page .btn:hover,
  .users-modal .btn:hover{background:#f1f5f9;}
  .users-page .btn-primary,
  .users-modal .btn-primary{background:#06b6d4;color:#fff;border-color:transparent;}
  .users-page .btn-primary:hover,
  .users-modal .btn-primary:hover{filter:brightness(.95);}
  .users-page .btn-danger,
  .users-modal .btn-danger{background:#ef4444;color:#fff;border-color:transparent;}
  .users-page .btn-danger:hover,
  .users-modal .btn-danger:hover{filter:brightness(.95);}
  .users-modal{position:fixed;inset:0;display:none;z-index:60;}
  .users-modal.show{display:block;}
  .users-modal .mask{position:absolute;inset:0;background:rgba(15,23,42,.55);backdrop-filter:blur(2px);}
  .roles-modal-container{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(96vw,1080px);display:flex;flex-direction:column;max-height:90vh;overflow:hidden;}
  .roles-modal-header{display:flex;align-items:center;justify-content:space-between;padding:1.25rem 1.75rem;border-bottom:1px solid #e2e8f0;gap:1rem;background:linear-gradient(135deg,rgba(240,249,255,.95),#ffffff);}
  .roles-modal-title{font-size:1.35rem;font-weight:700;color:#0f172a;}
  .roles-modal-subtitle{font-size:.85rem;color:#64748b;margin-top:.2rem;}
  .roles-modal-body{display:grid;grid-template-columns:320px 1fr;gap:1.25rem;padding:1.5rem;overflow:hidden;}
  @media (max-width:1024px){.roles-modal-body{grid-template-columns:1fr;}}
  .roles-sidebar{padding:1.25rem;display:flex;flex-direction:column;gap:1rem;background:linear-gradient(180deg,#f8fafc,#fff);border-radius:1rem;box-shadow:inset 0 0 0 1px rgba(148,163,184,.15);}
  .roles-sidebar-header{display:flex;align-items:flex-start;justify-content:space-between;gap:.75rem;}
  .roles-sidebar-title{font-size:1rem;font-weight:700;color:#0f172a;}
  .roles-sidebar-hint{font-size:.75rem;color:#64748b;margin-top:.25rem;}
  .roles-list{flex:1;overflow:auto;display:flex;flex-direction:column;gap:.6rem;padding-right:.35rem;}
  .roles-list button{transition:all .2s;border-radius:.85rem;padding:0.75rem .85rem;display:block;}
  .roles-list button:hover{box-shadow:0 8px 16px rgba(15,23,42,0.08);}
  .roles-editor{padding:1.25rem;display:flex;flex-direction:column;border-radius:1rem;background:#fff;box-shadow:inset 0 0 0 1px rgba(148,163,184,.12);}
  .roles-editor-inner{display:flex;flex-direction:column;height:100%;gap:1rem;}
  .role-header-row{display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:space-between;gap:1rem;padding-bottom:.75rem;border-bottom:1px solid #e2e8f0;}
  .role-heading-label{display:inline-flex;align-items:center;gap:.35rem;font-size:.7rem;letter-spacing:.18em;color:#94a3b8;text-transform:uppercase;font-weight:700;}
  .role-heading-title{font-size:1.5rem;font-weight:700;color:#0f172a;margin:.25rem 0 .35rem;}
  .role-heading-tags{display:flex;flex-wrap:wrap;gap:.4rem;}
  .role-chip{display:inline-flex;align-items:center;gap:.35rem;padding:.3rem .65rem;border-radius:999px;font-size:.7rem;font-weight:600;border:1px solid rgba(94, 234, 212, 0.6);background:rgba(236,254,255,.7);color:#0f172a;}
  .role-chip.muted{border-color:#cbd5e1;background:#f1f5f9;color:#475569;}
  .role-chip.info{border-color:#22d3ee;background:#ecfeff;color:#0f172a;}
  .role-actions-row{display:flex;flex-wrap:wrap;gap:.5rem;}
  .role-action{min-width:96px;justify-content:center;}
  .role-tabs{display:flex;gap:.4rem;padding:.35rem;background:#f1f5f9;border-radius:.85rem;border:1px solid #e2e8f0;}
  .role-tabs .tab{flex:1 1 auto;padding:.5rem .9rem;border-radius:.75rem;font-weight:600;font-size:.85rem;color:#475569;background:transparent;border:none;cursor:pointer;transition:all .2s;}
  .role-tabs .tab.active{background:#fff;color:#0f172a;box-shadow:0 6px 14px rgba(148,163,184,.18);}
  .role-panels{flex:1;overflow:auto;padding-right:.25rem;}
  .role-panels .panel{display:none;}
  .role-panels .panel.active{display:block;animation:fade .2s ease-out;}
  .role-panel-card{background:#fff;border:1px solid rgba(226,232,240,.9);border-radius:.9rem;padding:1.1rem 1.2rem;box-shadow:0 6px 18px rgba(15,23,42,.05);}
  .role-panel-card .panel-title{font-weight:700;color:#0f172a;margin-bottom:.3rem;}
  .role-footer{margin-top:auto;padding-top:.85rem;border-top:1px solid #e2e8f0;display:flex;justify-content:flex-end;gap:.6rem;}
  .roles-editor-empty{height:100%;display:flex;align-items:center;justify-content:center;font-size:.85rem;color:#64748b;}
  .users-page .role-pill{display:inline-flex;align-items:center;font-size:.7rem;padding:.2rem .55rem;border-radius:.75rem;background:#f1f5f9;border:1px solid #e2e8f0;color:#0f172a;}
  .users-page .role-pill.muted{background:#f8fafc;color:#64748b;border-color:#cbd5e1;}
  .users-page .hint{font-size:.78rem;color:#64748b;}
  .users-page .two-col{display:grid;grid-template-columns:260px 1fr;gap:1rem;}
  @media (max-width:980px){.users-page .two-col{grid-template-columns:1fr;}}
  .users-page .tabs{display:flex;gap:.25rem;padding:.25rem;background:#f1f5f9;border:1px solid #e2e8f0;border-radius:.75rem;}
  .users-page .tab{padding:.45rem .8rem;border-radius:.55rem;font-weight:600;color:#475569;background:transparent;border:none;cursor:pointer;}
  .users-page .tab.active{background:#fff;color:#0f172a;border:1px solid #e2e8f0;}
  .users-page .panel{display:none;}
  .users-page .panel.active{display:block;}
  .users-page .is-disabled{opacity:.45;pointer-events:none;filter:grayscale(.1);}
  .users-page .section-divider{height:1px;background:#e2e8f0;margin:14px 0;}
  .users-page .sub-divider{height:1px;background:#e2e8f0;margin:10px 0;}
  .users-page .seg3{display:grid;gap:0;border:1px solid #e2e8f0;border-radius:.75rem;overflow:hidden;grid-template-columns:1fr;}
  .users-page .seg3>label{display:flex;align-items:center;gap:.6rem;padding:.75rem 1rem;}
  .users-page .seg3>label+label{border-top:1px solid #e2e8f0;}
  @media (min-width:640px){
    .users-page .seg3{grid-template-columns:repeat(3,minmax(0,1fr));}
    .users-page .seg3>label+label{border-top:0;border-left:1px solid #e2e8f0;}
  }
  .users-page .segAuto{border:1px solid #e2e8f0;border-radius:.75rem;overflow:hidden;}
  @media (min-width:640px){
    .users-page .segAuto{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));}
    .users-page .segAuto>label{padding:.65rem .9rem;}
    .users-page .segAuto>label{border-top:1px solid #e2e8f0;}
    .users-page .segAuto>label:nth-child(-n+2){border-top:0;}
    .users-page .segAuto>label:nth-child(2n){border-left:1px solid #e2e8f0;}
  }
  @media (max-width:639px){
    .users-page .segAuto>label{display:block;padding:.65rem .9rem;}
    .users-page .segAuto>label+label{border-top:1px solid #e2e8f0;}
  }
  .users-page .segRadio{display:flex;border:1px solid #e2e8f0;border-radius:.75rem;overflow:hidden;}
  .users-page .segRadio>label{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.65rem .9rem;}
  .users-page .segRadio>label+label{border-left:1px solid #e2e8f0;}
.entry-item-col {
  min-width: min(40rem, 100%);
}
@media (max-width: 1023px) {
  .entry-item-col {
    min-width: 100%;
  }
}
.entry-item-input {
  min-width: 100%;
}
.entry-item-input::placeholder {
  white-space: normal;
}
.entry-item-panel {
  min-width: 100%;
}
@keyframes realtime-glow {
  0% {
    background-color: rgba(14, 165, 233, 0.12);
    box-shadow: inset 0 0 0 0 rgba(14, 165, 233, 0.35);
  }
  45% {
    background-color: rgba(14, 165, 233, 0.08);
    box-shadow: inset 4px 0 0 rgba(14, 165, 233, 0.45);
  }
  100% {
    background-color: transparent;
    box-shadow: inset 0 0 0 0 rgba(14, 165, 233, 0);
  }
}
.realtime-flash {
  position: relative;
  animation: realtime-glow 1.1s ease-out;
  animation-fill-mode: forwards;
}
.realtime-flash::after {
  content: "";
  position: absolute;
  inset: 0;
  border-left: 2px solid rgba(14, 165, 233, 0.55);
  opacity: 0;
  animation: realtime-glow-accent 1.1s ease-out;
  pointer-events: none;
}
@keyframes realtime-glow-accent {
  0% { opacity: 0.75; }
  60% { opacity: 0.4; }
  100% { opacity: 0; }
}

.dashboard-card-glow {
  animation: dashboard-card-glow 0.8s ease-out;
}
@keyframes dashboard-card-glow {
  0% {
    box-shadow: 0 16px 32px -18px rgba(14, 165, 233, 0.45);
    transform: translateY(-2px);
  }
  60% {
    box-shadow: 0 10px 24px -18px rgba(15, 23, 42, 0.3);
    transform: translateY(-1px);
  }
  100% {
    box-shadow: 0 6px 18px -14px rgba(15, 23, 42, 0.22);
    transform: translateY(0);
  }
}
.stat-counter-soft {
  animation: stat-counter-soft 0.6s ease-out;
}
@keyframes stat-counter-soft {
  0% { opacity: 0.3; filter: blur(1px); }
  100% { opacity: 1; filter: blur(0); }
}

/* ========== REDESIGNED ROLES MODAL ========== */
.roles-modal-container {
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  width: min(96vw, 1140px);
  max-height: 92vh;
  background: #fff;
  border-radius: 1.25rem;
  box-shadow: 0 25px 50px -12px rgba(0,0,0,.25);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.roles-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem;
  border-bottom: 1px solid #e2e8f0;
  background: linear-gradient(to bottom, #f8fafc, #fff);
}
.roles-modal-title {
  font-size: 1.25rem;
  font-weight: 700;
  color: #0f172a;
  margin: 0;
}
.roles-modal-subtitle {
  font-size: .8rem;
  color: #64748b;
  margin: .2rem 0 0;
}
.btn-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px; height: 36px;
  border-radius: .6rem;
  border: 1px solid #e2e8f0;
  background: #fff;
  color: #64748b;
  cursor: pointer;
  transition: all .15s;
}
.btn-icon:hover { background: #f1f5f9; color: #0f172a; }

.roles-modal-body {
  display: grid;
  grid-template-columns: 280px 1fr;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}
@media (max-width: 900px) {
  .roles-modal-body { grid-template-columns: 1fr; }
  .roles-sidebar { max-height: 220px; border-right: none; border-bottom: 1px solid #e2e8f0; }
}

/* Sidebar */
.roles-sidebar {
  display: flex;
  flex-direction: column;
  background: #f8fafc;
  border-right: 1px solid #e2e8f0;
  overflow: hidden;
}
.roles-sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.25rem;
  border-bottom: 1px solid #e2e8f0;
}
.roles-sidebar-title {
  font-weight: 700;
  font-size: .95rem;
  color: #0f172a;
}
.btn-sm {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .4rem .75rem;
  font-size: .78rem;
  font-weight: 600;
  border-radius: .5rem;
}
.roles-list {
  flex: 1;
  overflow-y: auto;
  padding: 1rem 1rem .5rem;
  display: flex;
  flex-direction: column;
  gap: .5rem;
}
.roles-list button[data-role-pick] {
  width: 100%;
  text-align: left;
  padding: .85rem 1rem;
  border-radius: .75rem;
  border: 1px solid #e2e8f0;
  background: #fff;
  cursor: pointer;
  transition: all .15s;
}
.roles-list button[data-role-pick]:hover {
  border-color: #cbd5e1;
  box-shadow: 0 2px 6px rgba(0,0,0,.04);
}
.roles-list button[data-role-pick].border-cyan-300 {
  border-color: #22d3ee;
  background: linear-gradient(135deg, #ecfeff 0%, #f0fdfa 100%);
  box-shadow: 0 0 0 3px rgba(34,211,238,.12);
}
.roles-sidebar-actions {
  padding: 1rem 1.25rem;
  border-top: 1px solid #e2e8f0;
  display: flex;
  flex-direction: column;
  gap: .5rem;
}
.roles-actions-row {
  display: flex;
  gap: .5rem;
}
.btn-action-sm {
  flex: 1;
  min-width: 80px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  padding: .55rem .75rem;
  font-size: .8rem;
  font-weight: 600;
  border-radius: .6rem;
  border: 1px solid #e2e8f0;
  background: #fff;
  color: #475569;
  cursor: pointer;
  transition: all .15s;
}
.btn-action-sm:hover:not(:disabled) { background: #f1f5f9; border-color: #cbd5e1; }
.btn-action-sm:disabled { opacity: .4; cursor: not-allowed; }
.btn-action-danger {
  width: 100%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  padding: .6rem .75rem;
  font-size: .8rem;
  font-weight: 600;
  border-radius: .6rem;
  border: 1px solid #fecaca;
  background: #fef2f2;
  color: #dc2626;
  cursor: pointer;
  transition: all .15s;
}
.btn-action-danger:hover:not(:disabled) { background: #fee2e2; border-color: #fca5a5; }
.btn-action-danger:disabled { opacity: .4; cursor: not-allowed; }
.btn-action {
  flex: 1;
  min-width: 80px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .35rem;
  padding: .55rem .65rem;
  font-size: .75rem;
  font-weight: 600;
  border-radius: .55rem;
  border: 1px solid #e2e8f0;
  background: #fff;
  color: #475569;
  cursor: pointer;
  transition: all .15s;
}
.btn-action:hover:not(:disabled) { background: #f1f5f9; border-color: #cbd5e1; }
.btn-action:disabled { opacity: .4; cursor: not-allowed; }
.btn-action.btn-danger { color: #dc2626; border-color: #fecaca; background: #fef2f2; }
.btn-action.btn-danger:hover:not(:disabled) { background: #fee2e2; }

/* Settings grid for delete permissions */
.settings-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1rem;
  padding: 1rem 1.25rem;
}
.settings-item {
  padding: 1rem;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: .75rem;
}
.settings-checkbox {
  display: flex;
  align-items: center;
  gap: .75rem;
  cursor: pointer;
}
.settings-checkbox input[type="checkbox"] {
  width: 1.1rem;
  height: 1.1rem;
  accent-color: #06b6d4;
}
.settings-label {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 600;
  color: #334155;
  font-size: .9rem;
}
.settings-label svg {
  color: #64748b;
}
.settings-hint {
  margin-top: .5rem;
  font-size: .75rem;
  color: #64748b;
  padding-left: 1.85rem;
}

/* Editor section */
.roles-editor {
  display: flex;
  flex-direction: column;
  padding: 1.25rem 1.5rem;
  overflow: hidden;
  background: #fff;
}
.roles-editor-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: .75rem;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #f1f5f9;
}
.roles-editor-info { display: flex; align-items: center; gap: .75rem; }
.roles-editor-name {
  display: flex;
  align-items: center;
  gap: .5rem;
  flex-wrap: wrap;
}
.roles-editor-name #roleNameChip {
  font-size: 1.1rem;
  font-weight: 700;
  color: #0f172a;
}
.role-badge {
  display: inline-flex;
  align-items: center;
  padding: .2rem .6rem;
  font-size: .68rem;
  font-weight: 600;
  border-radius: .4rem;
}
.role-badge.locked { background: #f1f5f9; color: #64748b; }
.role-badge.unsaved { background: #fef3c7; color: #b45309; }
.role-badge.hidden { display: none; }

/* Tabs */
.roles-tabs {
  display: flex;
  gap: .25rem;
  padding: .3rem;
  background: #f1f5f9;
  border-radius: .65rem;
  border: 1px solid #e2e8f0;
}
.roles-tabs .tab {
  padding: .5rem 1rem;
  font-size: .8rem;
  font-weight: 600;
  color: #64748b;
  background: transparent;
  border: none;
  border-radius: .5rem;
  cursor: pointer;
  transition: all .15s;
}
.roles-tabs .tab:hover { color: #334155; }
.roles-tabs .tab.active {
  background: #fff;
  color: #0f172a;
  box-shadow: 0 1px 3px rgba(0,0,0,.08);
}

/* Panels */
.roles-panels {
  flex: 1;
  overflow-y: auto;
  padding-right: .25rem;
}
.roles-panels .panel { display: none; }
.roles-panels .panel.active { display: block; animation: fadeIn .2s ease-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

/* Permission cards */
.perm-card {
  background: #fff;
  border: 1px solid #e2e8f0;
  border-radius: 1rem;
  padding: 1.25rem;
  box-shadow: 0 1px 3px rgba(0,0,0,.04);
}
.perm-card.is-disabled { opacity: .5; pointer-events: none; }
.perm-card-header {
  display: flex;
  align-items: flex-start;
  gap: .85rem;
  margin-bottom: 1.25rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #f1f5f9;
}
.perm-card-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 42px; height: 42px;
  border-radius: .75rem;
  background: linear-gradient(135deg, #ecfeff 0%, #f0fdfa 100%);
  color: #0891b2;
  flex-shrink: 0;
}
.perm-card-title {
  font-size: 1rem;
  font-weight: 700;
  color: #0f172a;
  margin: 0 0 .15rem;
}
.perm-card-desc {
  font-size: .8rem;
  color: #64748b;
  margin: 0;
}

/* Permission grid for visibility */
.perm-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: .5rem;
}
.perm-item {
  display: flex;
  align-items: center;
  gap: .65rem;
  padding: .75rem 1rem;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: .65rem;
  cursor: pointer;
  transition: all .15s;
}
.perm-item:hover { background: #f1f5f9; border-color: #cbd5e1; }
.perm-item:has(input:checked) {
  background: linear-gradient(135deg, #ecfeff 0%, #f0fdfa 100%);
  border-color: #22d3ee;
}
.perm-checkbox {
  width: 18px; height: 18px;
  accent-color: #0891b2;
  cursor: pointer;
}
.perm-label {
  font-size: .85rem;
  font-weight: 500;
  color: #334155;
}

/* Permission sections for export */
.perm-section {
  margin-bottom: 1.25rem;
}
.perm-section:last-child { margin-bottom: 0; }
.perm-section-title {
  font-size: .75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .04em;
  color: #64748b;
  margin: 0 0 .75rem;
}
.perm-list {
  display: flex;
  flex-direction: column;
  gap: .5rem;
}
.perm-item-row {
  display: flex;
  align-items: flex-start;
  gap: .75rem;
  padding: .85rem 1rem;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: .65rem;
  cursor: pointer;
  transition: all .15s;
}
.perm-item-row:hover { background: #f1f5f9; }
.perm-item-row:has(input:checked) {
  background: linear-gradient(135deg, #ecfeff 0%, #f0fdfa 100%);
  border-color: #22d3ee;
}
.perm-item-content { flex: 1; }
.perm-item-label {
  display: block;
  font-size: .88rem;
  font-weight: 600;
  color: #0f172a;
}
.perm-item-hint {
  display: block;
  font-size: .75rem;
  color: #64748b;
  margin-top: .15rem;
}
.perm-sub {
  margin-left: 1.5rem;
  padding-left: 1rem;
  border-left: 2px solid #e2e8f0;
}
.perm-sub.is-disabled { opacity: .4; pointer-events: none; }

/* Actions grid */
.actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}
.action-group {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: .75rem;
  overflow: hidden;
}
.action-group-header {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .75rem 1rem;
  background: #f1f5f9;
  border-bottom: 1px solid #e2e8f0;
  font-size: .8rem;
  font-weight: 700;
  color: #334155;
}
.action-group-items {
  padding: .5rem;
  display: flex;
  flex-direction: column;
  gap: .25rem;
}
.action-item {
  display: flex;
  align-items: center;
  gap: .6rem;
  padding: .55rem .75rem;
  border-radius: .5rem;
  cursor: pointer;
  transition: background .15s;
  font-size: .82rem;
  color: #475569;
}
.action-item:hover { background: #e2e8f0; }
.action-item:has(input:checked) { background: #ecfeff; color: #0f172a; }

/* Footer */
.roles-editor-footer {
  display: flex;
  justify-content: flex-end;
  gap: .65rem;
  padding-top: 1rem;
  margin-top: auto;
  border-top: 1px solid #e2e8f0;
}
.btn-outline {
  background: #fff;
  border: 1px solid #e2e8f0;
  color: #475569;
}
.btn-outline:hover { background: #f8fafc; border-color: #cbd5e1; }

/* Visibility + Scope Grid */
.vis-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.5rem;
}
@media (max-width: 768px) {
  .vis-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 480px) {
  .vis-grid {
    grid-template-columns: 1fr;
  }
}
.vis-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  padding: 0.6rem 0.85rem;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 0.6rem;
  transition: background .15s, border-color .15s;
}
.vis-item-empty {
  /* Empty placeholder to maintain grid alignment */
  visibility: hidden;
  min-height: 1px;
}
.vis-item.is-active {
  background: #ecfeff;
  border-color: #67e8f9;
}
.vis-item-main {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  flex: 1;
}
.vis-item-main .perm-label {
  white-space: nowrap;
}
.vis-scope-toggle {
  display: flex;
  align-items: center;
  border-left: 1px solid #e2e8f0;
  padding-left: 0.6rem;
  margin-left: 0.4rem;
}
.vis-scope-toggle.is-disabled {
  opacity: 0.35;
  pointer-events: none;
}
.scope-toggle-inline {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  cursor: pointer;
}
.scope-checkbox-sm {
  width: 1rem;
  height: 1rem;
  accent-color: #0891b2;
  cursor: pointer;
}
.scope-label-sm {
  font-size: 0.7rem;
  font-weight: 600;
  color: #64748b;
  min-width: 1.8rem;
}
.vis-item.is-active .scope-label-sm {
  color: #0e7490;
}
.scope-hint-inline {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  font-size: 0.72rem;
  color: #64748b;
  margin-top: 0.75rem;
  padding: 0.5rem 0.75rem;
  background: #f1f5f9;
  border-radius: 0.4rem;
  border-left: 3px solid #0891b2;
}
.scope-hint-inline svg {
  flex-shrink: 0;
}

/* Data Scope Settings (legacy - keep for compatibility) */
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 0.75rem;
}
.scope-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 0.75rem;
  transition: background .15s, border-color .15s;
}
.scope-item:hover {
  background: #f1f5f9;
}
.scope-item:has(input:checked) {
  background: #ecfeff;
  border-color: #22d3ee;
}
.scope-item-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
  font-weight: 600;
  color: #334155;
}
.scope-item-label svg {
  width: 1rem;
  height: 1rem;
  color: #64748b;
}
.scope-toggle {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
}
.scope-checkbox {
  width: 1.25rem;
  height: 1.25rem;
  accent-color: #0891b2;
  cursor: pointer;
}
.scope-toggle-text {
  font-size: 0.75rem;
  font-weight: 500;
  color: #64748b;
}
.scope-hint {
  font-size: 0.75rem;
  color: #64748b;
  margin-top: 0.75rem;
  padding: 0.75rem;
  background: #f1f5f9;
  border-radius: 0.5rem;
  border-left: 3px solid #0891b2;
}
